---
# tasks file for sbaerlocher.common

- name: Centos | SELinux Disable
  selinux: 
    state: disabled

- name: "Update | Install yum-cron"
  yum: name=yum-cron state=present

- name: "Update | Ensure yum-cron is running and enabled on boot"
  service: name=yum-cron state=started enabled=yes

- name: "Update | Configure autoupdates (RHEL 7)"
  lineinfile:
    dest: "/etc/yum/yum-cron.conf"
    regexp: '^apply_updates = .+'
    line: 'apply_updates = yes'
  when: ansible_distribution_major_version | int == 7

- name: "Update | Kernel limit"
  lineinfile:
    dest: "/etc/yum.conf"
    regexp: '^installonly_limit'
    line: 'installonly_limit=2'
